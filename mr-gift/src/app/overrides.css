/* CSS Overrides for Browser Compatibility Issues */
/* This file fixes specific compatibility issues in Tailwind CSS and other libraries */

/* CRITICAL: Fix Tailwind's base styles for text-size-adjust */
:host,
html {
  -webkit-text-size-adjust: 100% !important;
  -moz-text-size-adjust: 100% !important;
  -ms-text-size-adjust: 100% !important;
  text-size-adjust: 100% !important; /* Add standard property for modern browsers */
}

/* CRITICAL: Override Tailwind's backdrop-filter utilities */
.backdrop-filter,
[class*="backdrop-blur"] {
  -webkit-backdrop-filter: var(--tw-backdrop-blur, ) var(--tw-backdrop-brightness, ) var(--tw-backdrop-contrast, ) var(--tw-backdrop-grayscale, ) var(--tw-backdrop-hue-rotate, ) var(--tw-backdrop-invert, ) var(--tw-backdrop-opacity, ) var(--tw-backdrop-saturate, ) var(--tw-backdrop-sepia, ) !important;
  backdrop-filter: var(--tw-backdrop-blur, ) var(--tw-backdrop-brightness, ) var(--tw-backdrop-contrast, ) var(--tw-backdrop-grayscale, ) var(--tw-backdrop-hue-rotate, ) var(--tw-backdrop-invert, ) var(--tw-backdrop-opacity, ) var(--tw-backdrop-saturate, ) var(--tw-backdrop-sepia, ) !important;
}

/* CRITICAL: Override Tailwind's filter utilities */
.filter,
[class*="blur"],
[class*="brightness"],
[class*="contrast"],
[class*="grayscale"],
[class*="invert"] {
  -webkit-filter: var(--tw-blur, ) var(--tw-brightness, ) var(--tw-contrast, ) var(--tw-grayscale, ) var(--tw-hue-rotate, ) var(--tw-invert, ) var(--tw-saturate, ) var(--tw-sepia, ) var(--tw-drop-shadow, ) !important;
  filter: var(--tw-blur, ) var(--tw-brightness, ) var(--tw-contrast, ) var(--tw-grayscale, ) var(--tw-hue-rotate, ) var(--tw-invert, ) var(--tw-saturate, ) var(--tw-sepia, ) var(--tw-drop-shadow, ) !important;
}

/* CRITICAL: Override all user-select utilities */
.select-none,
[class*="select-none"] {
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
}

.select-text,
[class*="select-text"] {
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  user-select: text !important;
}

.select-all,
[class*="select-all"] {
  -webkit-user-select: all !important;
  -moz-user-select: all !important;
  -ms-user-select: all !important;
  user-select: all !important;
}

/* CRITICAL: Fix forced-color-adjust for Safari compatibility */
* {
  forced-color-adjust: auto;
}

@supports not (forced-color-adjust: auto) {
  * {
    /* Fallback for Safari - use standard color properties */
    color: inherit;
    background-color: inherit;
  }
}

/* Fix filter support */
.filter {
  -webkit-filter: var(--tw-blur, ) var(--tw-brightness, ) var(--tw-contrast, ) var(--tw-grayscale, ) var(--tw-hue-rotate, ) var(--tw-invert, ) var(--tw-saturate, ) var(--tw-sepia, ) var(--tw-drop-shadow, );
  filter: var(--tw-blur, ) var(--tw-brightness, ) var(--tw-contrast, ) var(--tw-grayscale, ) var(--tw-hue-rotate, ) var(--tw-invert, ) var(--tw-saturate, ) var(--tw-sepia, ) var(--tw-drop-shadow, );
}

/* Fix user-select support */
.select-none {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.select-text {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

.select-all {
  -webkit-user-select: all;
  -moz-user-select: all;
  -ms-user-select: all;
  user-select: all;
}

/* Fix text decoration support */
a {
  -webkit-text-decoration: inherit;
  text-decoration: inherit;
}

abbr:where([title]) {
  -webkit-text-decoration: underline dotted;
  text-decoration: underline dotted;
}

/* Fix appearance support */
button,
input:where([type="button"], [type="reset"], [type="submit"]) {
  -webkit-appearance: button;
  appearance: button;
}

::file-selector-button {
  -webkit-appearance: button;
  appearance: button;
}

::-webkit-search-decoration {
  -webkit-appearance: none;
  appearance: none;
}

/* Fix font smoothing */
.antialiased {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Fix transform support */
.transform {
  -webkit-transform: var(--tw-rotate-x, ) var(--tw-rotate-y, ) var(--tw-rotate-z, ) var(--tw-skew-x, ) var(--tw-skew-y, );
  transform: var(--tw-rotate-x, ) var(--tw-rotate-y, ) var(--tw-rotate-z, ) var(--tw-skew-x, ) var(--tw-skew-y, );
}

/* Fix transition support */
.transition {
  -webkit-transition: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;
  transition: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;
}

.transition-all {
  -webkit-transition: all;
  transition: all;
}

.transition-colors {
  -webkit-transition: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke;
  transition: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke;
}

/* Fix box shadow support */
.shadow-sm {
  -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
}

.shadow-lg {
  -webkit-box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
}

/* Fix flexbox support */
.flex {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}

.flex-col {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
}

.items-center {
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
}

.justify-center {
  -webkit-box-pack: center;
  -webkit-justify-content: center;
  -ms-flex-pack: center;
  justify-content: center;
}

.justify-between {
  -webkit-box-pack: justify;
  -webkit-justify-content: space-between;
  -ms-flex-pack: justify;
  justify-content: space-between;
}

/* Fix grid support */
.grid {
  display: -ms-grid;
  display: grid;
}

/* Fix forced-color-adjust for accessibility (Safari fallback) */
@media (forced-colors: active) {
  * {
    forced-color-adjust: auto;
  }
}

/* Fix for high contrast mode */
@media (prefers-contrast: high) {
  .border {
    border-width: 2px;
  }
  
  .shadow-sm,
  .shadow-lg {
    box-shadow: none;
    border: 2px solid currentColor;
  }
}

/* Fix for reduced motion */
@media (prefers-reduced-motion: reduce) {
  .transition,
  .transition-all,
  .transition-colors {
    -webkit-transition: none;
    transition: none;
  }
  
  .transform {
    -webkit-transform: none;
    transform: none;
  }
}

/* Fix for print styles */
@media print {
  .backdrop-filter {
    -webkit-backdrop-filter: none;
    backdrop-filter: none;
  }
  
  .filter {
    -webkit-filter: none;
    filter: none;
  }
  
  .shadow-sm,
  .shadow-lg {
    -webkit-box-shadow: none;
    box-shadow: none;
  }
}
